-- 1. Create the Enum type for roles
CREATE TYPE userrole AS ENUM ('patient', 'doctor', 'admin', 'staff');

-- 2. Create the users table
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    hashed_password VARCHAR(255) NOT NULL,
    salt VARCHAR(255) NOT NULL,
    role userrole NOT NULL DEFAULT 'patient',
    is_verified BOOLEAN DEFAULT FALSE
);

-- 3. (Optional) Create an index on email for faster lookups
CREATE INDEX ix_users_email ON users (email);